<app-view-options [project]="(project$ | async)!"></app-view-options>

<!-- Page header -->
<section class="flex justify-between items-center">
  <h2 class="typo-heading-5">Task List</h2>
</section>

<!-- Table -->
<table mat-table [dataSource]="(taskList$ | async) || []">

  <!-- Name column -->
  <ng-container matColumnDef="title">
    <th mat-header-cell *matHeaderCellDef i18n>Title</th>
    <td mat-cell *matCellDef="let task" class="clickable-cell"> {{ task.name }} </td>
  </ng-container>

  <!-- Statistics column -->
  <ng-container matColumnDef="status">
    <th mat-header-cell *matHeaderCellDef i18n>Status</th>
    <td mat-cell *matCellDef="let task">
      <div class="status">
        {{getStatus(task.statusId)}}
      </div>
    </td>
  </ng-container>

  <!-- Last update column -->
  <ng-container matColumnDef="assignee">
    <th mat-header-cell *matHeaderCellDef i18n>Assignee</th>
    <td mat-cell *matCellDef="let task"> - </td>
  </ng-container>

  <!-- Last update column -->
  <ng-container matColumnDef="deadline">
    <th mat-header-cell *matHeaderCellDef i18n>Deadline</th>
    <td mat-cell *matCellDef="let task">{{task.deadline | date:'dd.MM.yyyy'}}</td>
  </ng-container>

  <!-- Actions column -->
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef i18n></th>
    <td mat-cell *matCellDef="let task" class="action-cell">
      <button mat-icon-button [matMenuTriggerFor]="menu" class="flex items-center">
        <app-icon icon="matMoreVert"></app-icon>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item>
          <span i18n>Edit task</span>
        </button>
        <button mat-menu-item class="important">
          <span i18n>Delete task</span>
        </button>
      </mat-menu>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="['title', 'status', 'assignee', 'deadline', 'actions']"></tr>
  <tr mat-row *matRowDef="let row; columns: ['title', 'status', 'assignee', 'deadline', 'actions'];"></tr>
</table>
