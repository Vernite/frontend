import{ArrayNavigator}from"./navigator.js";export class HistoryNavigator{constructor(history=[],limit=10){this._initialize(history),this._limit=limit,this._onChange()}getHistory(){return this._elements}add(t){this._history.delete(t),this._history.add(t),this._onChange()}next(){return this._currentPosition()!==this._elements.length-1?this._navigator.next():null}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}has(t){return this._history.has(t)}_onChange(){this._reduceToLimit();const elements=this._elements;this._navigator=new ArrayNavigator(elements,0,elements.length,elements.length)}_reduceToLimit(){const data=this._elements;data.length>this._limit&&this._initialize(data.slice(data.length-this._limit))}_currentPosition(){const currentElement=this._navigator.current();return currentElement?this._elements.indexOf(currentElement):-1}_initialize(history){this._history=new Set;for(const entry of history)this._history.add(entry)}get _elements(){const elements=[];return this._history.forEach((e=>elements.push(e))),elements}}